<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login Panel SKH</title>

<style>
body{
  background:black;
  color:#00ffcc;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Arial;
}
.login-box{
  background:#111;
  padding:30px;
  border-radius:10px;
  width:340px;
  box-shadow:0 0 20px rgba(0,255,204,0.3);
}
input{
  width:100%;
  padding:10px;
  margin:10px 0;
  background:#222;
  border:1px solid #00ffcc;
  color:white;
  border-radius:6px;
}
button{
  width:100%;
  padding:10px;
  background:#00ffcc;
  border:none;
  cursor:pointer;
  font-weight:bold;
  border-radius:6px;
}
button:hover{ background:#00ddaa; }
</style>
</head>
<body>

<div class="login-box">
<h2 style="text-align:center;">Login Panel SKH</h2>
<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<script>
const WEB_APP_URL="https://script.google.com/macros/s/AKfycbxgBRf27sB3bMFNTTTfJ6ZGBAGe2xJ0Wn1cln5afaeUSL3Wcm4HMqHeSJFBU3yK60ik6A/exec";

async function login(){

const username=document.getElementById("username").value.trim();
const password=document.getElementById("password").value.trim();

if(!username||!password){
alert("Username & Password wajib diisi");
return;
}

const formData=new URLSearchParams();
formData.append("action","login");
formData.append("username",username);
formData.append("password",password);

const res=await fetch(WEB_APP_URL,{method:"POST",body:formData});
const result=await res.json();

if(result.status==="success"){

sessionStorage.setItem("isLoggedIn","true");
sessionStorage.setItem("username",result.username);
sessionStorage.setItem("role",result.role);

if(result.role==="Super Admin"){
window.location.href="admin.html";
}else if(result.role==="Admin"){
window.location.href="admin-panel.html";
}else{
window.location.href="anggota/dashboard-daftar-anggota.html";
}

}else{
alert("Login gagal");
}
}

/* AUTO LOGOUT SAAT TAB DITUTUP */
window.addEventListener("beforeunload",function(){
sessionStorage.clear();
});
</script>

</body>
</html>
