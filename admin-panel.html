<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel SKH</title>
<style>
body{font-family:Georgia,serif;background:#111;color:white;padding:40px}
.card{max-width:600px;margin:auto;background:#1e293b;padding:25px;border-radius:14px}
input,textarea{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:none}
button{padding:10px 18px;border:none;border-radius:8px;background:#d4af37;color:black;font-weight:bold;cursor:pointer}
.logout{background:red;color:white;margin-top:10px}
</style>
</head>
<body>

<div class="card">
<h2>Tambah Koleksi Keris SKH</h2>

<input id="nomor" placeholder="Nomor Sertifikat">
<input id="nama" placeholder="Nama Pusaka">
<input id="jenis" placeholder="Jenis">
<input id="periode" placeholder="Periode">
<textarea id="deskripsi" placeholder="Deskripsi"></textarea>
<button onclick="simpan()">Simpan</button>
<button class="logout" onclick="logout()">Logout</button>
</div>

<script>
// PROTEKSI LOGIN
if(sessionStorage.getItem("adminSKH")!=="logged"){
    window.location.href="index.html";
}

// AUTO TIMEOUT 5 MENIT
const maxTime=5*60*1000;
if(Date.now()-sessionStorage.getItem("loginTime")>maxTime){
    logout();
}

setInterval(()=>{
if(Date.now()-sessionStorage.getItem("loginTime")>maxTime){
    logout();
}
},10000);

function logout(){
sessionStorage.clear();
window.location.href="index.html";
}

// DATABASE
function getDB(){
return JSON.parse(localStorage.getItem("koleksiSKH")||"[]");
}
function setDB(data){
localStorage.setItem("koleksiSKH",JSON.stringify(data));
}
function simpan(){
let db=getDB();
let nomor=document.getElementById("nomor").value;
let nama=document.getElementById("nama").value;
let jenis=document.getElementById("jenis").value;
let periode=document.getElementById("periode").value;
let deskripsi=document.getElementById("deskripsi").value;

if(db.find(d=>d.nomor===nomor)){
alert("Nomor sudah ada!");
return;
}

db.push({nomor,nama,jenis,periode,deskripsi});
setDB(db);
alert("Data tersimpan");
}

if(localStorage.getItem("adminLogin") !== "true"){
    alert("Akses ditolak! Silakan login terlebih dahulu.");
    window.location.href="index.html";
}
</script>

</body>
</html>
