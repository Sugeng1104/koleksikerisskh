<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arsip Resmi Koleksi Keris SKH</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
    font-family:Georgia,serif;
    background:#0f172a;
    color:#f1f5f9;
    margin:0;
    padding-top:60px;
}

/* CENTER ATAS */
.wrapper{
    display:flex;
    justify-content:center;
    align-items:flex-start;
}

.card{
    width:10cm;
    background:#1e293b;
    padding:25px;
    border-radius:14px;
    box-shadow:0 6px 20px rgba(0,0,0,0.4);
}

h1{
    text-align:center;
    margin-bottom:30px;
    letter-spacing:2px;
}

input{
    width:100%;
    padding:10px;
    margin:6px 0;
    border-radius:8px;
    border:none;
}

button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:8px;
    background:#d4af37;
    color:black;
    font-weight:bold;
    cursor:pointer;
}

.certificate{
    border:4px double #d4af37;
    padding:30px;
    margin-top:20px;
    position:relative;
}

.watermark{
    position:absolute;
    top:40%;
    left:20%;
    font-size:80px;
    opacity:0.05;
    transform:rotate(-25deg);
}

.hash{
    font-size:12px;
    color:#cbd5e1;
    margin-top:15px;
}
</style>
</head>

<body>

<h1>ARSIP RESMI KOLEKSI KERIS SKH</h1>

<div class="wrapper">
    <div class="card">
        <h3>Verifikasi Publik</h3>
        <input id="cari" placeholder="Masukkan Nomor Sertifikat">
        <button onclick="verifikasi()">Verifikasi</button>
        <div id="hasil"></div>
    </div>
</div>

<script>
const secretKey="SKH2026BLOCK";

function getDB(){
 return JSON.parse(localStorage.getItem("koleksiSKH")||"[]");
}

function verifikasi(){
 let db=getDB();
 let nomor=document.getElementById("cari").value;
 let data=db.find(d=>d.nomor===nomor);
 let hasil=document.getElementById("hasil");
 hasil.innerHTML="";

 if(!data){
  hasil.innerHTML="<p style='color:red'><b>TIDAK VALID</b></p>";
  return;
 }

 hasil.innerHTML=`
 <div class='certificate'>
 <div class='watermark'>KERIS</div>
 <h2>SERTIFIKAT AUTENTIKASI</h2>
 <b>Status:</b> VALID<br><br>
 <b>Nomor:</b> ${data.nomor}<br>
 <b>Nama:</b> ${data.nama}<br>
 <b>Jenis:</b> ${data.jenis}<br>
 <b>Periode:</b> ${data.periode}<br><br>
 <b>Deskripsi:</b><br>${data.deskripsi}<br><br>
 <div id='qr'></div>
 <div class='hash'>Digital Hash:<br>${data.hash}</div>
 <br><button onclick='window.print()'>Cetak / Simpan PDF</button>
 </div>
 `;

 new QRCode(document.getElementById("qr"),{
  text: window.location.href.split("?")[0]+"?verify="+data.nomor,
  width:120,height:120
 });
}

window.onload=function(){
 const params=new URLSearchParams(window.location.search);
 if(params.get("verify")){
  document.getElementById("cari").value=params.get("verify");
  verifikasi();
 }
}
</script>

</body>
</html>
