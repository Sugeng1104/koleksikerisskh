<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SKH Museum Digital</title>

<style>
body{
    margin:0;
    background:#000;
    font-family:Georgia,serif;
    color:white;
}

.container{
    max-width:1400px;
    margin:auto;
    padding:40px;
}

h1{
    text-align:center;
    color:gold;
    font-size:36px;
    text-shadow:0 0 20px gold;
    margin-bottom:40px;
}

.gallery{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:25px;
}

.card{
    background:#111;
    border-radius:15px;
    overflow:hidden;
    box-shadow:0 0 20px rgba(212,175,55,0.3);
    transition:0.4s;
    cursor:pointer;
}

.card:hover{
    transform:scale(1.05);
    box-shadow:0 0 35px gold;
}

.img-wrapper{
    position:relative;
}

.img-wrapper img{
    width:100%;
    height:240px;
    object-fit:cover;
}

.watermark{
    position:absolute;
    bottom:10px;
    right:10px;
    font-size:11px;
    background:rgba(0,0,0,0.6);
    padding:4px 8px;
    border-radius:6px;
    color:gold;
}

.card-body{
    padding:15px;
}

.card-body h3{
    margin:5px 0;
    color:gold;
}

.card-body p{
    font-size:14px;
    color:#ccc;
}

/* MODAL */
.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.95);
    z-index:999;
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

.modal img{
    max-width:85%;
    max-height:70%;
    border-radius:10px;
    box-shadow:0 0 40px gold;
    transition:transform 0.3s ease;
}

.modal-info{
    margin-top:20px;
    text-align:center;
    max-width:800px;
}

.modal-info h2{
    color:gold;
}

.controls{
    margin-top:20px;
}

.controls button{
    padding:10px 15px;
    margin:5px;
    border:none;
    border-radius:6px;
    background:gold;
    cursor:pointer;
    font-weight:bold;
}

/* Back Button */
.back-btn{
    position:fixed;
    bottom:25px;
    right:25px;
    background:linear-gradient(45deg,#1e3a8a,#2563eb);
    color:white;
    padding:14px 20px;
    border-radius:50px;
    font-weight:bold;
    text-decoration:none;
    box-shadow:0 0 20px rgba(37,99,235,0.8);
    transition:0.3s;
}

.back-btn:hover{
    transform:scale(1.1);
    box-shadow:0 0 35px #3b82f6;
}

@media(max-width:900px){
.gallery{grid-template-columns:repeat(2,1fr);}
}
@media(max-width:500px){
.gallery{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="container">
<h1>SKH MUSEUM DIGITAL</h1>
<div class="gallery" id="gallery"></div>
</div>

<a href="index.html" class="back-btn">üè† Kembali</a>

<!-- MODAL -->
<div class="modal" id="modal">
    <img id="modalImg">
    <div class="modal-info" id="modalInfo"></div>
    <div class="controls">
        <button onclick="zoomIn()">Zoom +</button>
        <button onclick="zoomOut()">Zoom -</button>
        <button onclick="prev()">Prev</button>
        <button onclick="next()">Next</button>
        <button onclick="closeModal()">Close</button>
    </div>
</div>

<script>
//////////////////////////////////////////////////
// DECRYPT (SAMA DENGAN ADMIN)
//////////////////////////////////////////////////
function decrypt(data){
    return JSON.parse(decodeURIComponent(escape(atob(data))));
}

function getDB(){
    let raw=localStorage.getItem("dataPusaka");
    if(!raw) return [];
    try{
        return decrypt(raw);
    }catch{
        return [];
    }
}

let data=getDB();
let currentIndex=0;
let zoomLevel=1;

//////////////////////////////////////////////////
// RENDER GALERI
//////////////////////////////////////////////////
function render(){
    const gallery=document.getElementById("gallery");
    gallery.innerHTML="";

    if(data.length===0){
        gallery.innerHTML="<p style='text-align:center;'>Belum ada koleksi.</p>";
        return;
    }

    data.forEach((item,index)=>{
        gallery.innerHTML+=`
        <div class="card" onclick="openModal(${index})">
            <div class="img-wrapper">
                <img src="${item.foto}">
                <div class="watermark">SKH Museum</div>
            </div>
            <div class="card-body">
                <h3>${item.nama}</h3>
                <p>Pemilik: ${item.pemilik||"-"}</p>
                <p>Jenis: ${item.jenis||"-"}</p>
            </div>
        </div>`;
    });
}

//////////////////////////////////////////////////
// MODAL
//////////////////////////////////////////////////
function openModal(index){
    currentIndex=index;
    zoomLevel=1;
    const item=data[index];

    document.getElementById("modalImg").src=item.foto;
    document.getElementById("modalImg").style.transform="scale(1)";

    document.getElementById("modalInfo").innerHTML=`
        <h2>${item.nama}</h2>
        <p><strong>Nomor:</strong> ${item.nomor||"-"}</p>
        <p><strong>Pemilik:</strong> ${item.pemilik||"-"}</p>
        <p><strong>Jenis:</strong> ${item.jenis||"-"}</p>
        <p><strong>Periode:</strong> ${item.periode||"-"}</p>
        <p>${item.deskripsi||""}</p>
    `;

    document.getElementById("modal").style.display="flex";
}

function closeModal(){
    document.getElementById("modal").style.display="none";
}

function next(){
    currentIndex=(currentIndex+1)%data.length;
    openModal(currentIndex);
}

function prev(){
    currentIndex=(currentIndex-1+data.length)%data.length;
    openModal(currentIndex);
}

//////////////////////////////////////////////////
// ZOOM
//////////////////////////////////////////////////
function zoomIn(){
    zoomLevel+=0.2;
    document.getElementById("modalImg").style.transform=`scale(${zoomLevel})`;
}

function zoomOut(){
    zoomLevel=Math.max(1,zoomLevel-0.2);
    document.getElementById("modalImg").style.transform=`scale(${zoomLevel})`;
}

document.getElementById("modalImg").addEventListener("wheel",function(e){
    e.preventDefault();
    if(e.deltaY<0) zoomIn();
    else zoomOut();
});

//////////////////////////////////////////////////

render();
</script>

</body>
</html>
