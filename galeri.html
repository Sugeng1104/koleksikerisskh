<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galeri Pusaka SKH</title>

<style>
body{
    margin:0;
    background:#000;
    font-family:Georgia,serif;
    color:white;
    padding:40px;
}

.container{
    max-width:1200px;
    margin:auto;
}

h1{
    text-align:center;
    color:gold;
    margin-bottom:40px;
    text-shadow:0 0 10px rgba(212,175,55,0.7);
}

.gallery{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:20px;
}

.card{
    background:#111;
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 0 15px rgba(212,175,55,0.3);
    transition:0.3s;
}

.card:hover{
    transform:scale(1.03);
    box-shadow:0 0 25px gold;
}

.card img{
    width:100%;
    height:220px;
    object-fit:cover;
}

.card-body{
    padding:15px;
}

.card-body h3{
    margin:5px 0;
    color:gold;
    font-size:16px;
}

.card-body p{
    margin:3px 0;
    font-size:14px;
    color:#ddd;
}

.pagination{
    text-align:center;
    margin-top:30px;
}

.pagination button{
    padding:8px 15px;
    margin:5px;
    border:none;
    border-radius:6px;
    background:gold;
    cursor:pointer;
    font-weight:bold;
}

.back-btn{
    position:fixed;
    bottom:25px;
    right:25px;
    background:linear-gradient(45deg,#1e3a8a,#2563eb);
    color:white;
    padding:14px 20px;
    border-radius:50px;
    font-weight:bold;
    text-decoration:none;
    box-shadow:0 0 15px rgba(37,99,235,0.8);
    transition:0.3s;
}

.back-btn:hover{
    transform:scale(1.1);
    box-shadow:0 0 25px #3b82f6;
}

@media(max-width:900px){
    .gallery{
        grid-template-columns:repeat(2,1fr);
    }
}

@media(max-width:500px){
    .gallery{
        grid-template-columns:1fr;
    }
}
</style>
</head>
<body>

<div class="container">
<h1>Galeri Pusaka SKH</h1>
<div class="gallery" id="galleryContainer"></div>
<div class="pagination" id="pagination"></div>
</div>

<a href="index.html" class="back-btn">â¬… Kembali</a>

<script>

//////////////////////////////////////////////////
// DECRYPT FUNCTION (SAMA DENGAN ADMIN)
//////////////////////////////////////////////////
function decrypt(data){
    return JSON.parse(decodeURIComponent(escape(atob(data))));
}

//////////////////////////////////////////////////
// AMBIL DATABASE ADMIN
//////////////////////////////////////////////////
function getDB(){
    let raw = localStorage.getItem("dataPusaka");
    if(!raw) return [];

    try{
        return decrypt(raw);
    }catch(e){
        console.log("Gagal decrypt:",e);
        return [];
    }
}

let dataFinal = getDB();

//////////////////////////////////////////////////
// PAGINATION
//////////////////////////////////////////////////
const itemsPerPage = 20;
let currentPage = 1;

function renderGallery(){

    const container = document.getElementById("galleryContainer");
    container.innerHTML = "";

    if(dataFinal.length===0){
        container.innerHTML="<p>Belum ada data pusaka.</p>";
        return;
    }

    const start = (currentPage-1)*itemsPerPage;
    const end = start + itemsPerPage;
    const pageData = dataFinal.slice(start,end);

    pageData.forEach(item=>{
        container.innerHTML+=`
        <div class="card">
            <img src="${item.foto}">
            <div class="card-body">
                <h3>${item.nama}</h3>
                <p>Pemilik : ${item.pemilik||"-"}</p>
                <p>Jenis : ${item.jenis||"-"}</p>
            </div>
        </div>
        `;
    });

    renderPagination();
}

function renderPagination(){
    const totalPages = Math.ceil(dataFinal.length / itemsPerPage);
    const pag = document.getElementById("pagination");
    pag.innerHTML="";

    if(totalPages<=1) return;

    for(let i=1;i<=totalPages;i++){
        pag.innerHTML+=`
        <button onclick="goPage(${i})">${i}</button>
        `;
    }
}

function goPage(page){
    currentPage = page;
    renderGallery();
}

renderGallery();

</script>

</body>
</html>
